"use strict";window.addEventListener("DOMContentLoaded",function(){var f,e,t,o,c,l=[],g=0,a=0,u=0,_=!1,S=0,r={0:{name:"red",color:"#ff0000",used:0},1:{name:"blue",color:"#0066ff",used:0},2:{name:"pink",color:"#ff33cc",used:0},3:{name:"violet",color:"#9900cc",used:0},4:{name:"yellow",color:"#e6e600",used:0},5:{name:"orange",color:"#ff8000",used:0},6:{name:"green",color:"#339933",used:0},7:{name:"brown",color:"#996633",used:0}};for(var n,s,v=l,p=16,y=0;v.length<p;)n=void 0,n=Math.floor(8*Math.random()),(2!=r[n].used?(r[n].used++,l.push(r[n].color),1):0)&&y++;y===p&&(s=document.querySelector(".game__field"),new Promise(function(e,t){e(v.forEach(function(){var e=document.createElement("div");e.classList.add("game__field-square","closed"),s.append(e)}))}).then(function(){document.querySelectorAll(".game__field-square").forEach(function(r,s){r.addEventListener("click",function(){var o,e,t,n,c;e=s,(o=r).classList.contains("opened")||o===i.element||!0===d||(_||(_=!0,f=setInterval(C,1e3)),e=l[e],t=document.querySelector(".game__panel-steps-count"),c=e,(n=o).classList.add("openColor"),setTimeout(function(){n.classList.remove("closed"),n.style.backgroundColor=c,n.classList.remove("openColor")},200),0===i.color.length?(i.element=o,i.color=e):i.color===e&&1!=d?(d=!0,g++,h(t,++S),8===g?(clearInterval(f),L("show")):setTimeout(function(){b(o),b(i.element),i.clear(),d=!1},1e3)):(h(t,++S),new Promise(function(e,t){e(setTimeout(function(){q(o),q(i.element),i.clear()},1e3))}).then(function(){d=!0,setTimeout(function(){d=!1},1100)})))})})})),e=document.querySelector(".game__panel-best-minutes"),t=document.querySelector(".game__panel-best-seconds"),o=localStorage.getItem("bestSeconds"),c=localStorage.getItem("bestMinutes"),o?m(t,e,o,c):m(t,e,0,0);var i={element:"",color:"",clear:function(){this.element="",this.color=""}},d=!1;function h(e,t){e.textContent=t}function q(e){e.classList.add("closed"),e.removeAttribute("style")}function b(e){e.classList.add("opened"),e.removeAttribute("style")}function L(e){var t,o,n,c,r,s,l;"show"===e&&(document.querySelector(".congratulations-wrapper").classList.remove("hide"),t=document.querySelector(".congratulations__score-time-minutes"),o=document.querySelector(".congratulations__score-time-seconds"),n=document.querySelector(".congratulations__score-best-minutes"),c=document.querySelector(".congratulations__score-best-seconds"),r=document.querySelector(".congratulations__score-steps"),s=localStorage.getItem("bestSeconds"),l=localStorage.getItem("bestMinutes"),m(o,t,a,u),h(r,S),null==s||60*u+a<60*l+s?(m(c,n,a,u),localStorage.setItem("bestSeconds",a),localStorage.setItem("bestMinutes",u)):m(c,n,s,l)),"hide"===e&&document.querySelector(".congratulations-wrapper").classList.add("hide")}function m(e,t,o,n){e.textContent=o<10?"0".concat(o):o,t.textContent=n<10?"0".concat(n," "):n}document.querySelectorAll(".restart-btn").forEach(function(e){e.addEventListener("click",function(){location.reload(),L("hide")})});var w=document.querySelector(".game__panel-time-minutes"),I=document.querySelector(".game__panel-time-seconds");function C(){60===++a&&(u++,a=0),m(I,w,a,u)}});
//# sourceMappingURL=main.min.js.map
