"use strict";window.addEventListener("DOMContentLoaded",function(){var g,e,t,o,c,l=[],f=0,a=0,u=0,_=!1,S=0,s={0:{name:"red",color:"#DC143C",used:0},1:{name:"blue",color:"#4169E1",used:0},2:{name:"pink",color:"#C71585",used:0},3:{name:"violet",color:"#8B008B",used:0},4:{name:"yellow",color:"#FFD700",used:0},5:{name:"orange",color:"#FF8C00",used:0},6:{name:"green",color:"#32CD32",used:0},7:{name:"brown",color:"#8B4513",used:0}};for(var n,r,v=l,h=16,p=0;v.length<h;)n=void 0,n=Math.floor(8*Math.random()),(2!=s[n].used?(s[n].used++,l.push(s[n].color),1):0)&&p++;p===h&&(r=document.querySelector(".game__field"),new Promise(function(e,t){e(v.forEach(function(){var e=document.createElement("div");e.classList.add("game__field-square","shadow","closed"),r.append(e)}))}).then(function(){document.querySelectorAll(".game__field-square").forEach(function(s,r){s.addEventListener("click",function(){var o,e,t,n,c;e=r,(o=s).classList.contains("opened")||o===i.element||!0===d||(_||(_=!0,g=setInterval(E,1e3)),e=l[e],t=document.querySelector(".game__panel-steps-count"),c=e,(n=o).classList.add("openColor"),setTimeout(function(){n.classList.remove("closed"),n.style.backgroundColor=c,n.classList.remove("openColor")},200),0===i.color.length?(i.element=o,i.color=e):i.color===e&&1!=d?(d=!0,f++,y(t,++S),8===f?(clearInterval(g),L("show")):setTimeout(function(){b(o),b(i.element),i.clear(),d=!1},1e3)):(y(t,++S),new Promise(function(e,t){e(setTimeout(function(){q(o),q(i.element),i.clear()},1e3))}).then(function(){d=!0,setTimeout(function(){d=!1},1100)})))})})})),e=document.querySelector(".game__panel-best-minutes"),t=document.querySelector(".game__panel-best-seconds"),o=localStorage.getItem("bestSeconds"),c=localStorage.getItem("bestMinutes"),o?m(t,e,o,c):m(t,e,0,0);var i={element:"",color:"",clear:function(){this.element="",this.color=""}},d=!1;function y(e,t){e.textContent=t}function q(e){e.classList.add("closed"),e.removeAttribute("style")}function b(e){e.classList.add("opened"),e.classList.remove("shadow"),e.removeAttribute("style")}function L(e){var t,o,n,c,s,r,l;"show"===e&&(document.querySelector(".congratulations-wrapper").classList.remove("hide"),t=document.querySelector(".congratulations__score-time-minutes"),o=document.querySelector(".congratulations__score-time-seconds"),n=document.querySelector(".congratulations__score-best-minutes"),c=document.querySelector(".congratulations__score-best-seconds"),s=document.querySelector(".congratulations__score-steps"),r=localStorage.getItem("bestSeconds"),l=localStorage.getItem("bestMinutes"),m(o,t,a,u),y(s,S),null==r||60*u+a<60*l+r?(m(c,n,a,u),localStorage.setItem("bestSeconds",a),localStorage.setItem("bestMinutes",u)):m(c,n,r,l)),"hide"===e&&document.querySelector(".congratulations-wrapper").classList.add("hide")}function m(e,t,o,n){e.textContent=o<10?"0".concat(o):o,t.textContent=n<10?"0".concat(n," "):n}document.querySelectorAll(".restart-btn").forEach(function(e){e.addEventListener("click",function(){location.reload(),L("hide")})});var w=document.querySelector(".game__panel-time-minutes"),C=document.querySelector(".game__panel-time-seconds");function E(){60===++a&&(u++,a=0),m(C,w,a,u)}});
//# sourceMappingURL=main.min.js.map
